/* dist/js/gameLaunch.bundle.min.js */
!function(o){var t={};function a(e){if(t[e])return t[e].exports;var n=t[e]={i:e,l:!1,exports:{}};return o[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=o,a.c=t,a.d=function(e,n,o){a.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(n,e){if(1&e&&(n=a(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var t in n)a.d(o,t,function(e){return n[e]}.bind(null,t));return o},a.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(n,"a",n),n},a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},a.p="",a(a.s=2)}([function(e,n){e.exports=jQuery},function(e,n){e.exports=Roblox},function(e,n,o){"use strict";o.r(n);var t=o(0),c=o.n(t),d=o(1);function a(e){var n=new c.a.Deferred;return d.Hybrid.Game.launchGame(e,function(){n.resolve(e)}),n}var r,i,l={joinMultiplayerGame:function(e){var n=!0===e.isPlayTogetherGame;return a({requestType:d.Hybrid.Game.LAUNCH_MODES.SIMPLE_GAME,placeId:e.placeId.toString(),isPlayTogetherGame:n,browserTrackerId:d.Cookies.getBrowserTrackerId()})},followPlayerIntoGame:function(e){return a({requestType:d.Hybrid.Game.LAUNCH_MODES.FOLLOW_USER,userId:e.userId.toString(),browserTrackerId:d.Cookies.getBrowserTrackerId()})},joinGameInstance:function(e){var n=!0===e.isPlayTogetherGame;return a({requestType:d.Hybrid.Game.LAUNCH_MODES.GAME_INSTANCE,placeId:e.placeId.toString(),instanceId:e.gameId,isPlayTogetherGame:n,browserTrackerId:d.Cookies.getBrowserTrackerId()})},joinPrivateGame:function(e){return a({requestType:d.Hybrid.Game.LAUNCH_MODES.PRIVATE_SERVER,placeId:e.placeId.toString(),accessCode:e.accessCode,browserTrackerId:d.Cookies.getBrowserTrackerId()})},playTogetherGame:function(e){return a({requestType:d.Hybrid.Game.LAUNCH_MODES.SIMPLE_GAME,placeId:e.placeId.toString(),conversationId:e.conversationId.toString(),browserTrackerId:d.Cookies.getBrowserTrackerId()})}},s={modalClassName:"soli-modal",loginUrl:"/login?returnurl=",signupUrl:"/?returnurl=",eventContext:"gameDetails",loginField:"gameLaunch_login",signupField:"gameLaunch_signup"};c()(document).ready(function(){r=new d.TranslationResourceProvider,i=r.getTranslationResource("Feature.GameLaunchGuestMode")});var u={restrictGuests:function(e){var n=new c.a.Deferred;return"True"===c()("#PlaceLauncherStatusPanel").data("is-user-logged-in")?n.resolve(e):d.Dialog.open({titleText:i.get("Heading.Dialog.SignUpOrLogin"),bodyContent:i.get("Description.Dialog.SignUpOrLogin"),cssClass:s.modalClassName,acceptColor:d.Dialog.green,acceptText:i.get("Action.Dialog.SignUp"),declineText:i.get("Action.Dialog.Login"),onDecline:function(){d.FormEvents&&d.FormEvents.SendInteractionClick(s.eventContext,s.loginField);var e=s.loginUrl+encodeURIComponent(window.location.pathname+window.location.search);window.location.href=d.Endpoints?d.Endpoints.getAbsoluteUrl(e):e},onAccept:function(){!function(e){d.FormEvents&&d.FormEvents.SendInteractionClick("gameDetails",e);var n=s.signupUrl+encodeURIComponent(window.location.pathname+window.location.search);window.location.href=d.Endpoints?d.Endpoints.getAbsoluteUrl(n):n}(s.signupField)}}),n}},g={checkBcRequirement:function(e,n){var o=new c.a.Deferred;return n?o.resolve(e):void 0!==d.BCUpsellModal?(d.BCUpsellModal.open(),o.reject(e)):void 0!==window.showBCOnlyModal?(window.showBCOnlyModal(),o.reject(e)):o.resolve(e),o}},m={bars:[],init:function(e,n,o,t){var a=this.get(e);null==a&&(a={}),a.barID=e,a.innerBarID=n,a.percentageID=o,void 0===t&&(a.percentComplete=0),this.bars.push(a),this.update(e,a.percentComplete)},get:function(e){for(var n=0;n<this.bars.length;n+=1)if(this.bars[n].barID===e)return this.bars[n];return null},dispose:function(e){for(var n=0;n<this.bars.length;n+=1)this.bars[n].barID===e&&this.bars.splice(n,1)},update:function(e,n){var o=this.get(e);if(o){1<n&&(n=1);var t=c()("#".concat(e)).width(),a=Math.round(t*n);c()("#".concat(o.innerBarID)).animate({width:a},200,"swing"),o.percentageID&&0<c()("#".concat(o.percentageID)).length&&c()("#".concat(o.percentageID)).html("".concat(Math.round(100*n),"%")),o.percentComplete=n}}},p={newValue:"",showVideoPreRoll:!1,videoInitialized:!1,videoStarted:!1,videoCompleted:!1,videoSkipped:!1,videoCancelled:!1,videoErrored:!1,loadingBarMaxTime:3e4,loadingBarCurrentTime:0,loadingBarIntervalID:0,loadingBarID:"videoPrerollLoadingBar",loadingBarInnerID:"videoPrerollLoadingBarCompleted",loadingBarPercentageID:"videoPrerollLoadingPercent",videoDiv:"videoPrerollMainDiv",companionAdDiv:"videoPrerollCompanionAd",contentElement:"contentElement",videoLoadingTimeout:7e3,videoPlayingTimeout:23e3,videoLogNote:"",logsEnabled:!1,includedPlaceIds:"",isSwfPreloaderEnabled:!1,isFlashInstalled:!1,isPrerollShownEveryXMinutesEnabled:!1,isAgeTargetingEnabled:!0,isAgeOrSegmentTargetingEnabled:!1,adUnit:"",adTime:0,placeId:0,customTargeting:{userAge:"",userAgeOrSegment:"",userGender:"",gameGenres:"",environment:"",adTime:"",PLVU:!1},adsManager:null,adsLoader:null,adDisplayContainer:null,intervalTimer:null,videoContent:null,isCompanionAdRenderedByGoogleTag:!1};function v(){p.adsLoader.contentComplete()}function h(){p.videoContent=document.getElementById(p.contentElement)}function f(){p.adDisplayContainer=new window.google.ima.AdDisplayContainer(document.getElementById(p.videoDiv),p.videoContent)}function w(){var e="&iu=".concat(p.adUnit),n="";p.isAgeTargetingEnabled&&(n+="&Age=".concat(p.customTargeting.userAge)),p.isAgeOrSegmentTargetingEnabled&&(n+="&A=".concat(p.customTargeting.userAgeOrSegment));var o=encodeURIComponent("Env=".concat(p.customTargeting.environment,"&Gender=").concat(p.customTargeting.userGender).concat(n,"&Genres=").concat(p.customTargeting.gameGenres,"&PlaceID=").concat(p.placeId,"&Time=").concat(p.customTargeting.adTime,"&PLVU=").concat(p.customTargeting.PLVU));return"".concat("http://pubads.g.doubleclick.net/gampad/ads?impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url=[referrer_url]&description_url=[description_url]&correlator=[timestamp]").concat("&sz=400x300").concat(e).concat("&ciu_szs=300x250","&cust_params=").concat(o,"&")}function I(){window.googletag.defineSlot(p.adUnit,[300,250],p.companionAdDiv).addService(window.googletag.companionAds()),window.googletag.enableServices(),window.googletag.display(p.companionAdDiv)}function E(e){switch(e.type){case window.google.ima.AdEvent.Type.LOADED:break;case window.google.ima.AdEvent.Type.STARTED:if(p.videoStarted=!0,p.isCompanionAdRenderedBywindow.googletag){if(!window.googletag)break;window.googletag.cmd.push(I)}else{var n=e.getAd().getCompanionAds(300,250);if(0<n.length){var o=n[0].getContent();document.getElementById(p.companionAdDiv).innerHTML=o}}break;case window.google.ima.AdEvent.Type.SKIPPED:p.videoCompleted=!0,p.videoSkipped=!0,p.showVideoPreRoll=!1;break;case window.google.ima.AdEvent.Type.COMPLETE:p.videoStarted&&!1===p.videoCancelled&&(p.videoCompleted=!0,p.showVideoPreRoll=!1,""!==p.newValue&&c.a.cookie("RBXVPR",p.newValue,180))}}function C(){p.videoErrored=!0,p.videoCompleted=!0,p.videoLogNote="AdError"}function b(e){p.adsManager=e.getAdsManager(p.videoContent),p.adsManager.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,C),p.adsManager.addEventListener(window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,E),p.adsManager.addEventListener(window.google.ima.AdEvent.Type.LOADED,E),p.adsManager.addEventListener(window.google.ima.AdEvent.Type.STARTED,E),p.adsManager.addEventListener(window.google.ima.AdEvent.Type.SKIPPED,E),p.adsManager.addEventListener(window.google.ima.AdEvent.Type.COMPLETE,E);try{p.adsManager.init(400,300,window.google.ima.ViewMode.NORMAL),p.adsManager.start()}catch(e){C()}}function P(){window.google.ima.settings.setVpaidAllowed(!0),h(),f(),p.adDisplayContainer.initialize(),p.adsLoader=new window.google.ima.AdsLoader(p.adDisplayContainer),p.adsLoader.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,b,!1),p.adsLoader.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,C,!1),p.videoContent.addEventListener("ended",v);var e=new window.google.ima.AdsRequest,n=w();e.adTagUrl=n,e.linearAdSlotWidth=400,e.linearAdSlotHeight=300,e.nonLinearAdSlotWidth=400,e.nonLinearAdSlotHeight=300,p.adsLoader.requestAds(e)}function y(){var n=!1;try{new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(n=!0)}catch(e){navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(n=!0)}return n}function L(){if(p.logsEnabled){var e="";if(p.videoCompleted)e="Complete",""===p.videoLogNote&&(p.videoLogNote="NoTimeout"),p.logsEnabled=!1;else if(p.videoCancelled)e="Cancelled",p.videoLogNote=window.RobloxLaunch.state;else{if(!1!==p.videoInitialized||""===p.videoLogNote)return;e="Failed",p.logsEnabled=!1}d.GaEventSettings.gaDFPPreRollEnabled&&window.GoogleAnalyticsEvents&&window.GoogleAnalyticsEvents.FireEvent(["DFPPreRoll",e,p.videoLogNote])}}function T(){return!!p.videoInitialized&&(p.videoInitialized&&!p.videoStarted&&p.loadingBarCurrentTime>p.videoLoadingTimeout&&(p.videoCompleted=!0,p.videoLogNote="LoadingTimeout"),p.videoStarted&&!p.videoCompleted&&p.loadingBarCurrentTime>p.videoPlayingTimeout&&(p.videoCompleted=!0,p.videoLogNote="PlayingTimeout"),!p.videoCompleted)}function S(){var e=encodeURIComponent(w()),n="adTagUrl=".concat(e);c.a.ajax({url:"/game/preloader",data:{url:n},method:"GET",crossDomain:!0,xhrFields:{withCredentials:!0}}).success(function(e){c()("#videoPrerollMainDiv").html(e),p.videoErrored||(p.videoStarted=!0)})}function A(){c.a.ajax({url:"/game/updateprerollcount",method:"GET",crossDomain:!0,xhrFields:{withCredentials:!0}})}Object.assign(p,{contentEndedListener:v,createVideoContent:h,createAdDisplayContainer:f,constructUrl:w,renderCompanionAd:I,onAdEvent:E,onAdError:C,onAdsManagerLoaded:b,requestAds:P,checkFlashEnabled:y,checkEligibility:function(){p.showVideoPreRoll&&(y()&&(p.isFlashInstalled=!0),"True"===c()("#PlaceLauncherStatusPanel").data("is-protocol-handler-launch-enabled")||d.Client.IsRobloxInstalled()?void 0===window.google||void 0===window.google.ima?(p.videoLogNote="NoGoogle",p.showVideoPreRoll=!1):d.Client.isIDE()?(p.videoLogNote="RobloxStudio",p.showVideoPreRoll=!1):d.Client.isRobloxBrowser()?(p.videoLogNote="RobloxPlayer",p.showVideoPreRoll=!1):(window.chrome||window.safari)&&"#chromeInstall"===window.location.hash&&(p.showVideoPreRoll=!1):p.showVideoPreRoll=!1)},logVideoPreRoll:L,isPlaying:T,correctIEModalPosition:function(e){if(e.container.innerHeight()<=30){var n=c()("#videoPrerollPanel"),o=-Math.floor(n.innerHeight()/2);n.css({position:"relative",top:"".concat(o,"px")}),e.container.find(".VprCloseButton").css({top:"".concat(o-10,"px"),"z-index":"1003"})}},renderImaPreloader:S,updatePrerollCount:A,start:function(){0===p.placeId&&"undefined"!=typeof play_placeId&&(p.placeId=play_placeId),p.videoInitialized=!0,p.videoStarted=!1,p.videoCancelled=!1,p.videoCompleted=!1,p.videoSkipped=!1,p.loadingBarCurrentTime=0,p.videoLogNote="",m.init(p.loadingBarID,p.loadingBarInnerID,p.loadingBarPercentageID),p.loadingBarIntervalID=setInterval(function(){p.loadingBarCurrentTime+=1e3,m.update(p.loadingBarID,p.loadingBarCurrentTime/p.loadingBarMaxTime)},1e3),p.isSwfPreloaderEnabled&&p.isFlashInstalled?S():P()},cancel:function(){p.videoCancelled=!0,c.a.modal.close()},skip:function(){p.videoCompleted=!0,p.videoSkipped=!0,p.showVideoPreRoll=!1},close:function(){window.MadStatus&&window.MadStatus.running&&window.MadStatus.stop(""),window.RobloxLaunch.launcher&&(window.RobloxLaunch.launcher._cancelled=!0),clearInterval(p.loadingBarIntervalID),m.dispose(p.loadingBarID),T()&&(p.videoCancelled=!0),c.a.modal.close(),L(),p.isPrerollShownEveryXMinutesEnabled&&p.videoInitialized&&p.videoCompleted&&A()}});var D,G=p,x={waitForPreroll:function(e){var n=new c.a.Deferred,o=G;if(o.placeId=void 0!==e.placeId?e.placeId:0,o.showVideoPreRoll){var t={escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},zIndex:1031,onShow:function(e){o.correctIEModalPosition(e),o.start(),c()("#prerollClose").hide(),c()("#prerollClose").delay(1e3*o.adTime).show(300)},onClose:function(){o.close()},closeHTML:'<a href="#" id="prerollClose" class="ImageButton closeBtnCircle_35h ABCloseCircle VprCloseButton"></a>'};c()("#videoPrerollPanel").modal(t);var a=setInterval(function(){o.isPlaying()||(c.a.modal.close(),clearInterval(a),o.videoCancelled?n.reject(e):n.resolve(e))},200)}else n.resolve(e),o.logVideoPreRoll();return n}},R={isInstalling:!1,statusInterval:0,sendingLocalesEnabled:!1,robloxLocale:"",gameLocale:"",protocolUrlSeparator:"+",protocolUrlIncludesLaunchTime:!1,protocolDetectionEnabled:!1,avatarParamEnabled:!0,separateScriptParamsEnabled:!1,waitTimeBeforeFailure:300,protocolNameForStudio:"roblox-studio",protocolNameForClient:"roblox-client",logger:null,protocolEnableAuthenticationApiAuthenticationTickets:!1,protocolEnablePlatformAuthenticationTickets:!1,initialized:new Promise(function(e,n){D=e})},k={edit:"edit",plugin:"plugin",play:"play",build:"build"};function M(e,n){function o(){clearTimeout(t),e()}var t;t=setTimeout(function(){c.a.modal.close(),function(e,n){var o="True"===d.PlaceLauncher.Resources.RefactorEnabled,t=n.launchMode,a=t===k.edit||t===k.plugin;if(o){var r=a?d.PlaceLauncher.Resources.ProtocolHandlerAreYouInstalled.studio:d.PlaceLauncher.Resources.ProtocolHandlerAreYouInstalled.play;return d.Dialog.open({bodyContent:r.content,allowHtmlContentInBody:!0,showAccept:!0,acceptColor:d.Dialog.green,acceptText:r.buttonText,showDecline:!1,dismissable:!1,xToCancel:!0,footerText:r.footerContent,allowHtmlContentInFooter:!0,onAccept:function(){K(n)},cssClass:"protocolhandler-are-you-installed-modal"})}c()("#ProtocolHandlerAreYouInstalled").modal({escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},onClose:function(){e(),c()("#ProtocolHandlerInstallButton").off("click"),c.a.modal.close()},zIndex:1031}),c()("#ProtocolHandlerInstallButton, #ProtocolHandlerStudioInstallButton").click(function(){K(n)})}(o,n)},5e3),function(e,n){var o="True"===d.PlaceLauncher.Resources.RefactorEnabled,t=n===k.edit||n===k.plugin;if(o){var a=t?d.PlaceLauncher.Resources.ProtocolHandlerStartingDialog.studio.content:d.PlaceLauncher.Resources.ProtocolHandlerStartingDialog.play.content,r=d.PlaceLauncher.Resources.ProtocolHandlerStartingDialog.loader;d.Dialog.open({bodyContent:a+r,allowHtmlContentInBody:!0,showAccept:!1,showDecline:!1,dismissable:!1,cssClass:"protocolhandler-starting-modal",onCloseCallback:e,onCancel:function(){e(),c.a.modal.close()}})}else t?c()(".protocol-handler-container").each(function(){c()(this).find(".play-modal").addClass("hidden"),c()(this).find(".studio-modal").removeClass("hidden")}):c()(".protocol-handler-container").each(function(){c()(this).find(".play-modal").removeClass("hidden"),c()(this).find(".studio-modal").addClass("hidden")}),c()("#ProtocolHandlerStartingDialog").modal({escClose:!0,opacity:80,overlayCss:{backgroundColor:"#000"},onClose:function(){e(),c.a.modal.close()},zIndex:1031})}(o,n.launchMode)}function B(){c.a.modal.close(),d.Dialog.open({titleText:d.Lang.VisitGameResources["Heading.ErrorStartingGame"],bodyContent:d.Lang.VisitGameResources["Response.Dialog.ErrorLaunching"],acceptText:d.Lang.ControlsResources["Action.OK"]||"OK",showDecline:!1})}function U(n){var o=new c.a.Deferred;return clearInterval(R.statusInterval),R.statusInterval=setInterval(function(){var e=d.Endpoints.getAbsoluteUrl("/client-status");c.a.ajax(e,{success:function(e){"Unknown"!==e&&(o.resolve(n),clearInterval(R.statusInterval))},cache:!1})},3e3),o}function F(e){c.a.modal.close();var n={launchMethod:"Protocol",params:e};c()(te).trigger(te.startClientSucceededEvent,n),R.isInstalling&&(c()(te).trigger(te.successfulInstallEvent,n),R.isInstalling=!1)}function N(e){return!1}function O(){var e=d.Endpoints.getAbsoluteUrl("/game-auth/getauthticket");return R.protocolEnableAuthenticationApiAuthenticationTickets?(e="".concat(d.EnvironmentUrls.authApi,"/v1/authentication-ticket/"),c.a.ajax({method:"POST",url:e,contentType:"application/json"})):c.a.ajax({method:"GET",url:e,headers:{"RBX-For-Gameauth":"true"}})}function j(e){if(R.protocolDetectionEnabled&&void 0!==navigator.msLaunchUri)navigator.msLaunchUri(e,function(){},function(){});else{var n=c()("iframe#gamelaunch");0<n.length&&n.remove(),n=c()("<iframe id='gamelaunch' class='hidden'></iframe>").attr("src",e),c()("body").append(n);var o=new Event("ProtocolLaunchStartSelenium");window.dispatchEvent(o)}}function H(e){var n=new c.a.Deferred,o=R.protocolUrlSeparator,t="".concat(e.protocolName,":"),a=[];if(a.push(1),a.push("launchmode:".concat(e.launchMode)),!e.gameInfo||e.protocolName===R.protocolNameForStudio&&0===e.gameInfo.indexOf("Guest:")||a.push("gameinfo:".concat(encodeURIComponent(e.gameInfo))),R.protocolUrlIncludesLaunchTime&&a.push("launchtime:".concat(e.launchTime)),"True"===d.PlaceLauncher.Resources.IsProtocolHandlerBaseUrlParamEnabled){var r=d.EnvironmentUrls.websiteUrl||"https://".concat(window.location.host);a.push("baseUrl:".concat(encodeURIComponent(r)))}return c.a.each(e.otherParams,function(e,n){e===n?a.push(e):a.push("".concat(e,":").concat(encodeURIComponent(n)))}),t+=a.join(o),te.gameLaunchLogger.logToConsole("launchProtocolUrl: ".concat(JSON.stringify({url:t,params:e}))),j(t),n.resolve(e),n}function _(e){return c.a.when(function(e){var a=new c.a.Deferred,r=Object.assign({},e);return R.protocolEnablePlatformAuthenticationTickets&&!d.CurrentUser.isAuthenticated?(a.resolve(r),a):R.protocolEnableAuthenticationApiAuthenticationTickets?O().then(function(e,n,o){var t=o.getResponseHeader("RBX-Authentication-Ticket");return t&&0<t.length?(r.gameInfo=t,a.resolve(r)):a.reject(),a}):O().then(function(e){return r.gameInfo=e,a.resolve(r),a})}(e),function(){var e=d.Endpoints.getAbsoluteUrl("/client-status/set?status=Unknown");return c.a.ajax({method:"POST",url:e})}()).then(H,B).then(U).then(F,N)}function V(e){if(!c()(this).hasClass("disabled")){_(e.data);var n=c()("#ProtocolHandlerClickAlwaysAllowed");void 0===n.data("hideRememberOverlay")&&n.show()}return!1}function q(e){var n=Object.assign({},e);return n.launchTime=(new Date).getTime(),n.otherParams.browsertrackerid=d.Cookies.getBrowserTrackerId(),R.sendingLocalesEnabled&&(n.otherParams.robloxLocale=R.robloxLocale,n.otherParams.gameLocale=R.gameLocale),c()(te).trigger(te.startClientAttemptedEvent,{launchMethod:"Protocol",params:n}),M(function(){},n),_(n)}function z(e,n){var o=" ";if(d.Endpoints&&d.Endpoints.Urls&&(o="".concat(d.Endpoints.getAbsoluteUrl("/Game/PlaceLauncher.ashx"),"?")),"h"!==o[0]){o="http://".concat(window.location.host)+"/Game/PlaceLauncher.ashx?"}o=o.replace("placelauncher","PlaceLauncher");var t={request:e,browserTrackerId:d.Cookies.getBrowserTrackerId()};return c.a.extend(t,n),o+c.a.param(t)}function W(e,n,o){return function(e,n,o,t){var a=" ";d.Endpoints&&d.Endpoints.Urls&&(a="".concat(d.Endpoints.getAbsoluteUrl("/Game/".concat(e)),"?")),"h"!==a[0]&&(a="http://".concat(window.location.host)+"/Game/".concat(e,"?"));var r={placeId:n,upload:t?n:"",universeId:o,testMode:!1};return a+c.a.param(r)}("Edit.ashx",e,n,o)}function J(){document.getElementById("downloadInstallerIFrame").src="/install/setup.ashx"}function X(e,n){var o=Object.assign({},e),t=o.gameInfo;void 0!==o.gameInfo&&(o.gameInfo=void 0),c()(te).trigger(te.beginInstallEvent,{launchMethod:"Protocol",params:o}),R.isInstalling=!0,o.url=window.location.href,void 0!==t&&(o.gameInfo=t),n?document.getElementById("downloadInstallerIFrame").src="/install/setupStudio.ashx":J()}function K(e){var n=e.launchMode,o=n===k.edit||n===k.plugin;c.a.modal.close(),o||(d.Dialog.open({titleText:c()("#InstallationInstructions .ph-modal-header .title").text(),allowHtmlContentInBody:!0,bodyContent:c()("#InstallationInstructions .modal-content-container").html(),allowHtmlContentInFooter:!0,footerText:c()("#InstallationInstructions .xsmall").html(),acceptColor:d.Dialog.none,declineColor:d.Dialog.none,cssClass:"install-instructions-modal",xToCancel:!0,onCloseCallback:function(){c()("#ProtocolHandlerClickAlwaysAllowed").hide()}}),setTimeout(function(){c()(".VisitButtonContinueGLI a").removeClass("disabled").click(e,V)},5e3)),X(e,o)}function Y(){c()(te).trigger(te.manualDownloadEvent,{launchMethod:"Protocol",params:{}}),J()}Object.assign(R,{joinMultiplayerGame:function(e){var n=R.protocolNameForClient,o=z("RequestGame",e),t=!0===e.isPlayTogetherGame;return q({protocolName:n,launchMode:"play",otherParams:{placelauncherurl:o},placeId:e.placeId,isPlayTogetherGame:t})},openStudio:function(){var e={};return R.avatarParamEnabled&&(e.avatar="avatar"),q({protocolName:R.protocolNameForStudio,launchMode:"edit",otherParams:e})},returnToStudio:function(){var e={task:"ReturnFromLogin"};return R.avatarParamEnabled&&(e.avatar="avatar"),q({protocolName:R.protocolNameForStudio,launchMode:"edit",otherParams:e})},openPluginInStudio:function(e){var n={pluginid:e};R.avatarParamEnabled&&(n.avatar="avatar"),q({protocolName:R.protocolNameForStudio,launchMode:"plugin",otherParams:n})},editGameInStudio:function(e,n,o){var t;t=R.separateScriptParamsEnabled?{task:"EditPlace",placeId:e,universeId:n}:{script:W(e,n,o)},R.avatarParamEnabled&&(t.avatar="avatar"),q({protocolName:R.protocolNameForStudio,launchMode:"edit",otherParams:t,placeId:e})},followPlayerIntoGame:function(e){return q({protocolName:R.protocolNameForClient,launchMode:"play",otherParams:{placelauncherurl:z("RequestFollowUser",e)}})},joinGameInstance:function(e){var n=R.protocolNameForClient,o=z("RequestGameJob",e),t=!0===e.isPlayTogetherGame;return q({protocolName:n,launchMode:"play",otherParams:{placelauncherurl:o},placeId:e.placeId,isPlayTogetherGame:t})},joinPrivateGame:function(e){return q({protocolName:R.protocolNameForClient,launchMode:"play",otherParams:{placelauncherurl:z("RequestPrivateGame",e)},placeId:e.placeId})},playTogetherGame:function(e){return q({protocolName:R.protocolNameForClient,launchMode:"play",otherParams:{placelauncherurl:z("RequestPlayTogetherGame",e)},placeId:e.placeId,conversationId:e.conversationId})},manualDownload:Y,attachManualDownloadToLink:function(){c()("body #GameLaunchManualInstallLink").click(function(){return Y(),!1})},startDownload:J,setLocationHref:j,doAuthTicketRequest:O,showDialog:M,showLaunchFailureDialog:B,cleanUpAndLogSuccess:F,cleanUpAndLogFailure:N}),c()(document).ready(function(){te.gameLaunchInterface=R;var e=c()("#PlaceLauncherStatusPanel");R.protocolNameForClient=e.data("protocol-name-for-client"),R.protocolNameForStudio=e.data("protocol-name-for-studio"),R.protocolUrlIncludesLaunchTime=e.data("protocol-url-includes-launchtime"),R.protocolDetectionEnabled=e.data("protocol-detection-enabled"),R.separateScriptParamsEnabled=e.data("protocol-separate-script-parameters-enabled"),R.avatarParamEnabled=e.data("protocol-avatar-parameter-enabled"),R.sendingLocalesEnabled=e.data("protocol-sending-locales-enabled"),R.robloxLocale=e.data("protocol-roblox-locale"),R.gameLocale=e.data("protocol-game-locale"),R.protocolEnableAuthenticationApiAuthenticationTickets=e.data("protocol-enable-api-site-authentication-tickets"),R.protocolEnablePlatformAuthenticationTickets=e.data("protocol-enable-authentication-tickets"),R.logger||void 0===window.Roblox.ProtocolHandlerLogger||(R.logger=window.Roblox.ProtocolHandlerLogger),D()});var Q=R;function Z(e,n,o,t,a,r,i){try{var l=e[r](i),c=l.value}catch(e){return void o(e)}l.done?n(c):Promise.resolve(c).then(t,a)}var $={gameLaunchInterface:Q,gameLaunchLogger:null};function ee(e,n,o){$.gameLaunchInterface.editGameInStudio(e,n,o)}function ne(e){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o={placeId:e,isPlayTogetherGame:!0===(2<arguments.length?arguments[2]:void 0)};return g.checkBcRequirement(o,n).then(u.restrictGuests).then(x.waitForPreroll).then($.gameLaunchInterface.joinMultiplayerGame)}function oe(){return(oe=function(l){return function(){var e=this,i=arguments;return new Promise(function(n,o){var t=l.apply(e,i);function a(e){Z(t,n,o,a,r,"next",e)}function r(e){Z(t,n,o,a,r,"throw",e)}a(void 0)})}}(regeneratorRuntime.mark(function e(n,o,t){var a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.gameLaunchInterface.initialized;case 2:return a={placeId:n,accessCode:o,linkCode:t},r=x.waitForPreroll(a).then($.gameLaunchInterface.joinPrivateGame),e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}c()(document).ready(function(){c()("body").bindGameLaunch()}),c.a.fn.bindGameLaunch=function(){return this.find(".VisitButtonPlayGLI").click(function(){var e=c()(this);ne(e.attr("placeid"),e.data("is-membership-level-ok"))}),this.find(".VisitButtonEditGLI").click(function(){var e=c()(this);ee(e.attr("placeid"),e.data("universeid"),!!e.data("allowupload"))}),this},Object.assign($,{authenticationChecker:u,prerollPlayer:x,bcUpsellModalInterface:g,joinMultiplayerGame:ne,openStudio:function(){$.gameLaunchInterface.openStudio()},returnToStudio:function(){$.gameLaunchInterface.returnToStudio()},openPluginInStudio:function(e){$.gameLaunchInterface.openPluginInStudio(e)},editGameInStudio:ee,followPlayerIntoGame:function(e){var n={userId:e};return u.restrictGuests(n).then(x.waitForPreroll).then($.gameLaunchInterface.followPlayerIntoGame)},joinGameInstance:function(e,n,o,t){var a={placeId:e,gameId:n,isPlayTogetherGame:!0===t};return u.restrictGuests(a).then(x.waitForPreroll).then($.gameLaunchInterface.joinGameInstance)},joinPrivateGame:function(e,n,o){return oe.apply(this,arguments)},playTogetherGame:function(e,n){var o={placeId:e,conversationId:n};return g.checkBcRequirement(o,!0).then(u.restrictGuests).then(x.waitForPreroll).then($.gameLaunchInterface.playTogetherGame)},setGameLaunchInterface:function(e){$.gameLaunchInterface=e},setGameLaunchLogger:function(e){$.gameLaunchLogger=e},startClientAttemptedEvent:"startClientAttempted",startClientFailedEvent:"startClientFailed",startClientSucceededEvent:"startClientSucceeded",beginInstallEvent:"beginInstall",successfulInstallEvent:"successfulInstall",manualDownloadEvent:"manualDownload"});var te=$,ae={lastContext:"unknown",contextCategories:{joinUser:"JoinUser"}};function re(e,n){var o=c()("#PlaceLauncherStatusPanel");return{lType:o&&o.data("is-protocol-handler-launch-enabled")&&"true"===o.data("is-protocol-handler-launch-enabled").toLowerCase()?"protocol":"plugin",pid:e,refuid:n,pg:function(){var e=window.location.pathname.toLowerCase(),n="profile",o=e.lastIndexOf(n);return-1!==o&&e.length===o+n.length?n:-1!==e.indexOf("/develop")?"develop":"gameDetail"}()}}function ie(e,n,o,t){null!==n&&""!==n&&"unknown"!==n&&(ae.lastContext=n),d.EventStream.SendEvent(e,ae.lastContext,re(o,t))}Object.assign(ae,{SendGamePlayIntent:function(e,n,o){ie("gamePlayIntent",e,n,o),c()(document).trigger("playButton:gamePlayIntent")},SendDevelopIntent:function(e,n){ie("developIntent",e,n)},SendInstallBegin:function(e,n){ie("installBegin",e,n)},SendInstallSuccess:function(e,n){ie("installSuccess",e,n)},SendClientStartAttempt:function(e,n){ie("clientStartAttempt",e,n)},SendClientStartSuccessWeb:function(e,n){ie("clientStartSuccessWeb",e,n)},SendManualDownloadClick:function(e,n){ie("manualDownload",e,n)}});var le=ae,ce={logToConsoleEnabled:!1,logToGAEnabled:!0,logToEphemeralCountersEnabled:!0},de={};de[te.startClientAttemptedEvent]=["GameLaunchAttempt_<os>","GameLaunchAttempt_<os>_<launchmethod>"],de[te.startClientSucceededEvent]=["GameLaunchSuccessWeb_<os>","GameLaunchSuccessWeb_<os>_<launchmethod>"];var se={};d.GaEventSettings.gaLaunchAttemptAndLaunchSuccessEnabled&&(se[te.startClientAttemptedEvent]="Launch Attempt",se[te.startClientSucceededEvent]="Launch Success"),se[te.beginInstallEvent]="Install Begin",se[te.successfulInstallEvent]="Install Success",se[te.manualDownloadEvent]="Manual Download";var ue={};function ge(e){ce.logToConsoleEnabled&&console.log(e)}function me(e,n){if(ce.logToEphemeralCountersEnabled){var o=c()("#PlaceLauncherStatusPanel").data("os-name");"Windows"===o&&(o="Win32"),e=(e=e.replace("<os>",o)).replace("<launchmethod>",n),window.EventTracker.fireEvent&&window.EventTracker.fireEvent(e)}}function pe(e,n,o,t){void 0!==window.GoogleAnalyticsEvents&&ce.logToGAEnabled&&window.GoogleAnalyticsEvents.FireEvent&&window.GoogleAnalyticsEvents.FireEvent([e,n,o,t])}function ve(e,o){ge("".concat(e.type,": ").concat(JSON.stringify(o))),de[e.type]&&c.a.each(de[e.type],function(e,n){me(n,o.launchMethod)}),se[e.type]&&pe(o.launchMethod,se[e.type],function(e){return e.params.launchMode}(o),0),"True"===c()("#PlaceLauncherStatusPanel").data("event-stream-for-protocol-enabled")&&ue[e.type]&&ue[e.type](null,o.params.placeId)}ue[te.startClientAttemptedEvent]=le.SendClientStartAttempt,ue[te.startClientSucceededEvent]=le.SendClientStartSuccessWeb,ue[te.beginInstallEvent]=le.SendInstallBegin,ue[te.successfulInstallEvent]=le.SendInstallSuccess,ue[te.manualDownloadEvent]=le.SendManualDownloadClick,Object.assign(ce,{logToConsole:ge,logToEphemeralCounters:me,logToGA:pe}),c()(document).ready(function(){var e=[te.startClientAttemptedEvent,te.startClientFailedEvent,te.startClientSucceededEvent,te.beginInstallEvent,te.successfulInstallEvent,te.manualDownloadEvent];c()(te).on(e.join(" "),ve)});var he=ce;var fe=function(){var e="click";c()("body").on(e,".VisitButtonPlay, .VisitButtonPlayGLI",function(){var e,n=c()(this);if((n.hasClass("VisitButtonPlay")||n.hasClass("VisitButtonPlayGLI"))&&(e="PlayButton"),e){var o=c()(this).attr("placeid"),t=c()(this).data("universe-id"),a=c()(this).data("user-id"),r=c()(this).data("originator-type"),i=c()(this).data("originator-id");"GameUpdateNotification"===r&&c.a.ajax({url:"".concat(d.EnvironmentUrls.notificationApi,"/v2/stream-notifications/game-update-notification-interacted"),type:"POST",data:{universeId:t,createdOn:new Date(i),interactionType:"Played",currentUserId:a}});var l=d.UrlParser?d.UrlParser.getParameterValueByName("rbxp"):null;le.SendGamePlayIntent(e,o,l)}}),c()("body").on(e,".VisitButtonEdit, .VisitButtonEditGLI",function(){var e=c()(this).attr("placeid");le.SendDevelopIntent("Edit",e)}),c()("#rbx-running-games").on(e,".rbx-game-server-item .rbx-game-server-join",function(){var e=c()(this).data("placeid");e&&le.SendGamePlayIntent("JoinInstance",e)}),c()("#rbx-friends-running-games").on(e,".rbx-friends-game-server-item .rbx-friends-game-server-join",function(){var e=c()(this).data("placeid");e&&le.SendGamePlayIntent("JoinInstance",e)}),c()("#game-instances").on(e,"#rbx-vip-servers .rbx-vip-server-item .rbx-vip-server-join",function(){var e=c()(this).data("placeid");e&&le.SendGamePlayIntent("PrivateServer",e)}),c()("#build-page").on(e,".roblox-edit-button",function(){var e=c()(this).parents("table.item-table"),n=e.data("rootplace-id")||e.data("item-id");n&&le.SendDevelopIntent("Edit",n)})};window.Roblox||(window.Roblox={}),Object.assign(window.Roblox,{AuthenticationChecker:u,BCUpsellModalInterface:g,GameLauncher:te,GameLaunchLogger:he,GamePlayEvents:le,PrerollPlayer:x,ProtocolHandlerClientInterface:Q,VideoPreRollDFP:G}),c()(document).ready(function(){fe(),Object(d.DeviceMeta)().isUWPApp&&(window.Roblox.AppHybridClientInterface=l,te.setGameLaunchInterface(l)),te.setGameLaunchLogger(he)})}]);

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("GameLaunch");